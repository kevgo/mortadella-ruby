module Mortadella
  class Horizontal
    # The resulting Cucumber-compatible table structure
    # First element is headers, followed by data rows
    attr_reader table: Array[Array[untyped]]

    @headers: Array[String]
    @dry: Array[String]
    @previous_row: Array[untyped]?

    def initialize: (headers: Array[String], ?dry: Array[String]) -> void

    def <<: (Array[untyped] row) -> self
      raises ArgumentError

    def empty?: () -> bool

    def keep_matching_columns: (Array[String] columns) -> self

    private

    def can_dry?: (String column_name) -> bool

    def column_indices_to_drop: (Array[String] columns) -> Array[Integer]

    def dry_up: (Array[untyped] row) -> Array[untyped]

    def validate_row_length!: (Array[untyped] row) -> void
      raises ArgumentError
  end
end
